{"version":3,"sources":["webpack:///./src/views/Edit.vue?2718","webpack:///src/views/Edit.vue","webpack:///./src/views/Edit.vue?b4d2","webpack:///./src/views/Edit.vue","webpack:///./node_modules/core-js/modules/es6.function.name.js","webpack:///./src/components/BookInfo.vue?f821","webpack:///src/components/BookInfo.vue","webpack:///./src/components/BookInfo.vue?2c57","webpack:///./src/components/BookInfo.vue","webpack:///./src/components/BookInfo.vue?622c"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","backPage","$route","params","barTitle","book","staticRenderFns","Editvue_type_script_lang_js_","name","components","BookInfo","methods","Object","objectSpread","vuex_esm","clearBar","computed","beforeRouteLeave","to","from","next","views_Editvue_type_script_lang_js_","component","componentNormalizer","__webpack_exports__","dP","__webpack_require__","f","FProto","Function","prototype","nameRE","NAME","configurable","get","match","e","staticClass","_l","field","key","type","_g","directives","rawName","value","expression","class","error","isError","placeholder","domProps","checked","Array","isArray","_i","on","change","$event","$$a","$$el","target","$$c","$$v","$$i","$set","concat","slice","onFocus","focus","_q","input","composing","is","edit","click","preventDefault","deleteThis","_v","_e","errors","tag","i","style","_s","msg","BookInfovue_type_script_lang_js_","props","String","Loading","data","fields","title","required","author","date","pattern","desc","booooks","mounted","setBar","pos","text","path","func","submit","attributes","publicationDate","split","description","find","undefined","_this","$nextTick","validate","disableBar","method","add","id","then","response","clearBooks","getRealId","$router","push","_this2","fieldKeys","keys_default","forEach","test","length","_this3","deleteBook","_this4","components_BookInfovue_type_script_lang_js_","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_BookInfo_vue_vue_type_style_index_0_id_6e480236_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_BookInfo_vue_vue_type_style_index_0_id_6e480236_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0___default","n"],"mappings":"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","file":"js/edit.84f29fb1.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('BookInfo',{attrs:{\"backPage\":(\"/book/\" + (this.$route.params.id)),\"barTitle\":\"Edit book\",\"book\":_vm.book}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <BookInfo :backPage=\"`/book/${this.$route.params.id}`\" barTitle=\"Edit book\" :book=\"book\" />\r\n</template>\r\n\r\n<script>\r\nimport { mapState, mapActions } from 'vuex'\r\nimport BookInfo from '@/components/BookInfo.vue'\r\n\r\nexport default {\r\n  name: 'edit',\r\n  components: {\r\n    BookInfo\r\n  },\r\n  methods: {\r\n    ...mapActions('bar', {\r\n      clearBar: 'clearAll'\r\n    })\r\n  },\r\n  computed: {\r\n    ...mapState('books', {\r\n      book: 'currentBook'\r\n    })\r\n  },\r\n  beforeRouteLeave(to, from, next) {\r\n    this.clearBar()\r\n    next()\r\n  }\r\n}\r\n</script>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Edit.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Edit.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Edit.vue?vue&type=template&id=25340908&\"\nimport script from \"./Edit.vue?vue&type=script&lang=js&\"\nexport * from \"./Edit.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var dP = require('./_object-dp').f;\nvar FProto = Function.prototype;\nvar nameRE = /^\\s*function ([^ (]*)/;\nvar NAME = 'name';\n\n// 19.2.4.2 name\nNAME in FProto || require('./_descriptors') && dP(FProto, NAME, {\n  configurable: true,\n  get: function () {\n    try {\n      return ('' + this).match(nameRE)[1];\n    } catch (e) {\n      return '';\n    }\n  }\n});\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"info\"},[_c('form',[_vm._l((_vm.fields),function(field,key){return [((field.type)==='checkbox'&&(field.type != 'textarea'))?_c('input',_vm._g({directives:[{name:\"model\",rawName:\"v-model\",value:(field.value),expression:\"field.value\"}],class:{ error: _vm.isError(key) },attrs:{\"placeholder\":field.name,\"type\":\"checkbox\"},domProps:{\"checked\":Array.isArray(field.value)?_vm._i(field.value,null)>-1:(field.value)},on:{\"change\":function($event){var $$a=field.value,$$el=$event.target,$$c=$$el.checked?(true):(false);if(Array.isArray($$a)){var $$v=null,$$i=_vm._i($$a,$$v);if($$el.checked){$$i<0&&(_vm.$set(field, \"value\", $$a.concat([$$v])))}else{$$i>-1&&(_vm.$set(field, \"value\", $$a.slice(0,$$i).concat($$a.slice($$i+1))))}}else{_vm.$set(field, \"value\", $$c)}}}},field.onFocus ? { focus: field.onFocus } : {})):((field.type)==='radio'&&(field.type != 'textarea'))?_c('input',_vm._g({directives:[{name:\"model\",rawName:\"v-model\",value:(field.value),expression:\"field.value\"}],class:{ error: _vm.isError(key) },attrs:{\"placeholder\":field.name,\"type\":\"radio\"},domProps:{\"checked\":_vm._q(field.value,null)},on:{\"change\":function($event){return _vm.$set(field, \"value\", null)}}},field.onFocus ? { focus: field.onFocus } : {})):(field.type != 'textarea')?_c('input',_vm._g({directives:[{name:\"model\",rawName:\"v-model\",value:(field.value),expression:\"field.value\"}],class:{ error: _vm.isError(key) },attrs:{\"placeholder\":field.name,\"type\":field.type},domProps:{\"value\":(field.value)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(field, \"value\", $event.target.value)}}},field.onFocus ? { focus: field.onFocus } : {})):_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(field.value),expression:\"field.value\"}],class:{ error: _vm.isError(key) },attrs:{\"placeholder\":field.name},domProps:{\"value\":(field.value)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(field, \"value\", $event.target.value)}}})]}),(_vm.is.edit())?_c('button',{staticClass:\"delete\",on:{\"click\":function($event){$event.preventDefault();return _vm.deleteThis($event)}}},[_vm._v(\"Delete\")]):_vm._e()],2),(_vm.isLoading)?_c('Loading'):_vm._e(),_c('div',{staticClass:\"errors\"},[(_vm.errors.length)?_c('p',[_vm._v(\"Error!\")]):_vm._e(),_c('transition-group',{attrs:{\"name\":\"list\",\"tag\":\"ul\"}},_vm._l((_vm.errors),function(error,i){return _c('li',{key:error.field,style:((\"--delay: .\" + (i * 1) + \"s\"))},[_vm._v(_vm._s(error.msg))])}),0)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"info\">\r\n    <form>\r\n      <template v-for=\"(field, key) in fields\">\r\n        <input :type=\"field.type\" :class=\"{ error: isError(key) }\"\r\n               :placeholder=\"field.name\"\r\n               v-on=\"field.onFocus ? { focus: field.onFocus } : {}\"\r\n               v-model=\"field.value\" v-if=\"field.type != 'textarea'\" />\r\n        <textarea :class=\"{ error: isError(key) }\"\r\n               :placeholder=\"field.name\"\r\n               v-model=\"field.value\" v-else></textarea>\r\n      </template>\r\n      <button class=\"delete\" v-if=\"is.edit()\" @click.prevent=\"deleteThis\">Delete</button>\r\n    </form>\r\n    <Loading v-if=\"isLoading\" />\r\n    <div class=\"errors\">\r\n      <p v-if=\"errors.length\">Error!</p>\r\n      <transition-group name=\"list\" tag=\"ul\">\r\n        <li :key=\"error.field\" :style=\"`--delay: .${i * 1}s`\" v-for=\"(error, i) in errors\">{{error.msg}}</li>\r\n      </transition-group>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapState, mapActions, mapMutations } from 'vuex'\r\nimport Loading from '@/components/Loading.vue'\r\n\r\nexport default {\r\n  name: 'BookInfo',\r\n  props: {\r\n    backPage: String,\r\n    barTitle: String,\r\n    book: Object,\r\n  },\r\n  components: {\r\n    Loading\r\n  },\r\n  data() {\r\n    return {\r\n      fields: {\r\n        title: {\r\n          type: 'text',\r\n          name: 'Title',\r\n          value: '',\r\n          required: true\r\n        },\r\n        author: {\r\n          type: 'text',\r\n          name: 'Author',\r\n          value: '',\r\n          required: true\r\n        },\r\n        date: {\r\n          type: 'text',\r\n          name: 'Created at',\r\n          value: '',\r\n          required: true,\r\n          // Y: 1XXX, 2XXX; M: 0X, 10~12; D: 0X~2X, 30~31\r\n          pattern: /^([12]\\d{3})-(0[1-9]|1[0-2])-(0[1-9]|[12]\\d|3[01])$/,\r\n          onFocus(e) {\r\n            e.target.type = 'date'\r\n          }\r\n        },\r\n        desc: {\r\n          type: 'textarea',\r\n          name: 'Description',\r\n          value: '',\r\n          required: true\r\n        }\r\n      },\r\n      errors: [],\r\n      booooks: []\r\n    }\r\n  },\r\n  mounted() {\r\n    this.setBar({\r\n      pos: 'left',\r\n      text: 'Back',\r\n      path: this.backPage\r\n    })\r\n    this.setBar({\r\n      pos: 'center',\r\n      text: this.barTitle\r\n    })\r\n    this.setBar({\r\n      pos: 'right',\r\n      text: 'Save',\r\n      func: this.submit\r\n    })\r\n    if(this.is.edit() && this.book) {\r\n      this.fields.title.value = this.book.attributes.title\r\n      this.fields.author.value = this.book.attributes.author\r\n      this.fields.date.value = this.book.attributes.publicationDate.split('T')[0]\r\n      this.fields.desc.value = this.book.attributes.description\r\n    }\r\n  },\r\n  methods: {\r\n    isError(field) {\r\n      const error = this.errors.find(error => error.field == field)\r\n      return error !== undefined\r\n    },\r\n    submit() {\r\n      this.errors = []\r\n      this.$nextTick(() => {\r\n        if(this.validate()) {\r\n          this.disableBar({ pos: 'right' })\r\n          const method = this.is.add() ? 'addBook' : 'updateBook'\r\n          const params = {\r\n            title: this.fields.title.value,\r\n            desc: this.fields.desc.value,\r\n            author: this.fields.author.value,\r\n            date: this.fields.date.value\r\n          }\r\n          if(this.is.edit())\r\n            params['id'] = this.$route.params.id\r\n          this[method](params).then(response => {\r\n            this.clearBooks()\r\n            const id = this.getRealId(response.id)\r\n            this.$router.push('/book/' + id)\r\n          })\r\n        }\r\n      })\r\n    },\r\n    validate() {\r\n      const fieldKeys = Object.keys(this.fields)\r\n      fieldKeys.forEach((name, i) => {\r\n        const field = this.fields[name];\r\n        if(field.required && !field.value) {\r\n          this.errors.push({\r\n            field: fieldKeys[i],\r\n            msg: `\"${field.name}\" field is required.`\r\n          })\r\n          return\r\n        }\r\n        if(field.pattern && !field.pattern.test(field.value)) {\r\n          this.errors.push({\r\n            field: fieldKeys[i],\r\n            msg: `\"${field.name}\" field has wrong value.`\r\n          })\r\n          return\r\n        }\r\n      })\r\n      return this.errors.length == 0\r\n    },\r\n    deleteThis() {\r\n      this.deleteBook({\r\n        id: this.$route.params.id\r\n      }).then(response => {\r\n        this.clearBooks()\r\n        this.$router.push('/')\r\n      })\r\n    },\r\n    getRealId(id) {\r\n      return id.match(/books\\/([a-z0-9-]+)/)[1]\r\n    },\r\n    ...mapActions('books', [\r\n      'addBook',\r\n      'updateBook',\r\n      'deleteBook'\r\n    ]),\r\n    ...mapMutations('books', [\r\n      'clearBooks',\r\n      'clearBook'\r\n    ]),\r\n    ...mapActions('bar', {\r\n      setBar: 'set',\r\n      clearBar: 'clearAll',\r\n      disableBar: 'disable'\r\n    })\r\n  },\r\n  computed: {\r\n    is() {\r\n      return {\r\n        add: () => this.$route.name == 'add',\r\n        edit: () => this.$route.name == 'edit'\r\n      }\r\n    },\r\n    ...mapState('books', [\r\n      'isLoading'\r\n    ])\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.info {\r\n  --danger: #F44336;\r\n  max-width: 600px;\r\n}\r\nform {\r\n\r\n  > * {\r\n    font-size: 15px;\r\n    background: #FFF;\r\n    margin-bottom: 10px;\r\n    padding: 0 10px;\r\n    width: 100%;\r\n    height: 36px;\r\n    line-height: 36px;\r\n    display: block;\r\n    border: 1px solid #EEE;\r\n    border-radius: 3px;\r\n    transition: border .1s linear;\r\n  }\r\n  textarea {\r\n    padding: 10px;\r\n    line-height: 20px;\r\n    height: 130px;\r\n    resize: none;\r\n  }\r\n  .delete {\r\n    color: #FFF;\r\n    background: var(--danger);\r\n    cursor: pointer;\r\n  }\r\n  .error {\r\n    border-color: var(--danger);\r\n    animation: shake .2s linear 2;\r\n  }\r\n}\r\n@keyframes shake {\r\n  0% { transform: translateX(-8px); }\r\n  50% { transform: translateX(8px); }\r\n  100% { transform: translateX(-8px); }\r\n}\r\n.errors {\r\n  p {\r\n    font-size: 18px;\r\n    font-weight: bold;\r\n    color: var(--danger);\r\n  }\r\n  ul {\r\n    margin-top: 5px;\r\n  }\r\n  li {\r\n    list-style-position: inside;\r\n    line-height: 22px;\r\n  }\r\n}\r\n.list-leave-active {\r\n  display: none;\r\n}\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BookInfo.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BookInfo.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./BookInfo.vue?vue&type=template&id=6e480236&scoped=true&\"\nimport script from \"./BookInfo.vue?vue&type=script&lang=js&\"\nexport * from \"./BookInfo.vue?vue&type=script&lang=js&\"\nimport style0 from \"./BookInfo.vue?vue&type=style&index=0&id=6e480236&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6e480236\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BookInfo.vue?vue&type=style&index=0&id=6e480236&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BookInfo.vue?vue&type=style&index=0&id=6e480236&lang=scss&scoped=true&\""],"sourceRoot":""}